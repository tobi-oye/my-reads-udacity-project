(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,a){e.exports=a(34)},25:function(e,t,a){},32:function(e,t,a){},34:function(e,t,a){"use strict";a.r(t);var o=a(1),n=a.n(o),r=a(18),s=a.n(r),l=a(5),c=a(6),i=a(8),u=a(7),d=a(9),h=a(15),b="https://reactnd-books-api.udacity.com",m=localStorage.token;m||(m=localStorage.token=Math.random().toString(36).substr(-8));var v={Accept:"application/json",Authorization:m},k=(a(25),a(4)),p=function(e){function t(){var e,a;Object(l.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={query:"",searchResult:[]},a.updateQuerry=function(e){a.setState({query:e})},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"search",value:function(e){var t=this;(function(e){return fetch("".concat(b,"/search"),{method:"POST",headers:Object(h.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then(function(e){return e.json()}).then(function(e){return e.books})})(e).then(function(e){if(!e.error)return t.setState({searchResult:e});t.setState({searchResult:[]})}).catch(console.log("err"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.searchResult,o=t.query;return n.a.createElement("div",null,n.a.createElement("div",{className:"search-books"},n.a.createElement("div",{className:"search-books-bar"},n.a.createElement(k.b,{className:"close-search",to:"/"},"Close"),n.a.createElement("div",{className:"search-books-input-wrapper"},n.a.createElement("input",{type:"text",placeholder:"Search by title or author",onChange:function(t){e.updateQuerry(t.target.value),t.target.value&&e.search(t.target.value)},value:o}))),n.a.createElement("div",{className:"search-books-results"},n.a.createElement("ol",{className:"books-grid"},this.props.searchResult!==[]?a.map(function(t){return n.a.createElement("li",null,n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-top"},n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(t.imageLinks?t.imageLinks.smallThumbnail:"",")")}}),n.a.createElement("div",{className:"book-shelf-changer"},n.a.createElement("select",{onClick:function(a){return e.props.moveBook([],a,t)}},n.a.createElement("option",{value:"move",disabled:!0},"Move to..."),Object.values(e.props.options).slice(0,3).map(function(e){return n.a.createElement("option",{value:e.id,key:e.id}," ",e.label," ")}),n.a.createElement("option",{selected:!0},"none")))),n.a.createElement("div",{className:"book-title"},t.title),n.a.createElement("div",{className:"book-authors"},t.authors?t.authors[0]:"")))}):a===[]?n.a.createElement("p",null,"result not found"):""))))}}]),t}(o.Component),f=function(e){function t(){return Object(l.a)(this,t),Object(i.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{className:"list-books"},n.a.createElement("div",{className:"list-books-title"},n.a.createElement("h1",null,"MyReads")),n.a.createElement("div",{className:"list-books-content"},n.a.createElement("div",null,Object.values(this.props.bookShelves).map(function(t){return n.a.createElement("div",{className:"bookshelf"},n.a.createElement("h2",{className:"bookshelf-title"},t.shelveName),n.a.createElement("div",{className:"bookshelf-books"},n.a.createElement("ol",{className:"books-grid"},t.books.map(function(a){return n.a.createElement("li",null,n.a.createElement("div",{className:"book"},n.a.createElement("div",{className:"book-top"},n.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(a.imageLinks.smallThumbnail,")")}}),n.a.createElement("div",{className:"book-shelf-changer"},n.a.createElement("select",{onClick:function(o){return e.props.moveBook(t,o,a)}},n.a.createElement("option",{value:"move",disabled:!0,selected:!0},"Move to..."),Object.values(e.props.options).map(function(e){return n.a.createElement("option",{value:e.id,key:e.id}," ",e.label," ")})))),n.a.createElement("div",{className:"book-title"},a.title),n.a.createElement("div",{className:"book-authors"},a.authors[0])))}))))}))),n.a.createElement("div",{className:"open-search"},n.a.createElement(k.b,{to:"/searchPage"},n.a.createElement("button",null))))}}]),t}(o.Component),g=a(0),E=function(e){function t(){var e,a;Object(l.a)(this,t);for(var o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(n)))).state={bookShelves:{currentlyReading:{shelveName:"Currently Reading",books:[]},wantToRead:{shelveName:"Want to Read",books:[]},read:{shelveName:"Read",books:[]}},options:{currentlyReading:{label:"Currently Reading",id:"currentlyReading"},wantToRead:{label:"Want to Read",id:"wantToRead"},read:{label:"Read",id:"read"},none:{label:"None",id:"none"}},allBooks:[]},a.moveBook=function(e,t,o){var n=t.target.value;a.removeBook(o,e,n),a.addBook(n,o),a.updateBook(o,n),console.log(a.updateBook(o,n)),console.log(o.id,n)},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"updateBook",value:function(e,t){return a=e,o=t,fetch("".concat(b,"/books/:").concat(a.id),{method:"PUT",headers:Object(h.a)({},v,{"Content-Type":"application/json"}),body:JSON.stringify({shelf:o})}).then(function(e){return e.json()});var a,o}},{key:"addBook",value:function(e,t){return"currentlyReading"===e?this.setState(function(e){var a=Object.assign({},e.bookShelves);return a.currentlyReading.books=e.bookShelves.currentlyReading.books.concat(t),{bookShelves:a}}):"wantToRead"===e?this.setState(function(e){var a=Object.assign({},e.bookShelves);return a.wantToRead.books=e.bookShelves.wantToRead.books.concat(t),{bookShelves:a}}):"read"===e?this.setState(function(e){var a=Object.assign({},e.bookShelves);return a.read.books=e.bookShelves.read.books.concat(t),{bookShelves:a}}):void 0}},{key:"removeBook",value:function(e,t,a){return"currentlyReading"===t.id&&"none"!==a?this.setState(function(t){var a=Object.assign({},t.bookShelves);return a.currentlyReading.books=t.bookShelves.currentlyReading.books.filter(function(t){return t.id!==e.id}),{bookShelves:a}}):"wantToRead"===t.id&&"none"!==a?this.setState(function(t){var a=Object.assign({},t.bookShelves);return a.wantToRead.books=t.bookShelves.wantToRead.books.filter(function(t){return t.id!==e.id}),{bookShelves:a}}):"read"===t.id&&"none"!==a?this.setState(function(t){var a=Object.assign({},t.bookShelves);return a.read.books=t.bookShelves.read.books.filter(function(t){return t.id!==e.id}),{bookShelves:a}}):void 0}},{key:"componentDidMount",value:function(){var e=this;fetch("".concat(b,"/books"),{headers:v}).then(function(e){return e.json()}).then(function(e){return e.books}).then(function(t){return e.setState({allBooks:t,bookShelves:{currentlyReading:{shelveName:"Currently Reading",books:t.slice(0,2),id:"currentlyReading"},wantToRead:{shelveName:"Want to Read",books:t.slice(2,4),id:"wantToRead"},read:{shelveName:"Read",books:t.slice(4,7),id:"read"}}})})}},{key:"render",value:function(){var e=this,t=this.state,a=t.bookShelves,o=t.options;return n.a.createElement("div",{className:"app"},n.a.createElement(g.a,{path:"/searchPage",render:function(){return n.a.createElement(p,{options:o,showMainPage:e.showMainPage,moveBook:e.moveBook})}}),n.a.createElement(g.a,{exact:!0,path:"/",render:function(){return n.a.createElement(f,{bookShelves:a,options:o,moveBook:e.moveBook})}}))}}]),t}(n.a.Component);a(32);s.a.render(n.a.createElement(k.a,null,n.a.createElement(E,null)),document.getElementById("root"))}},[[20,2,1]]]);
//# sourceMappingURL=main.0c2a272f.chunk.js.map